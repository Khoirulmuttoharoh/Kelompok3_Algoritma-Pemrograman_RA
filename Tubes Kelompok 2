import tkinter as tk
from tkinter import messagebox

# Root window
root = tk.Tk()
root.title("Kuis Interaktif")
root.geometry("500x400")
root.configure(bg="#f0f0f0")

# Data penyimpanan
users = {"admin": "password123"}  # Sistem login (username dan password)
soal = [
    {"pertanyaan": "Apa ibu kota Indonesia?", "pilihan": ["Jakarta", "Surabaya", "Bandung"], "jawaban": "Jakarta"}
]
skor = 0

# Frame setup
frames = {}
def create_frame(name):
    frame = tk.Frame(root, bg="#f9f9f9", padx=10, pady=10)
    frames[name] = frame
    return frame

login_frame = create_frame("login")
menu_frame = create_frame("menu")
tambah_soal_frame = create_frame("tambah_soal")
kuis_frame = create_frame("kuis")
skor_frame = create_frame("skor")

# Variabel untuk pilihan jawaban
var_pilihan = tk.StringVar()

# Fungsi umum

def switch_frame(current, next):
    frames[current].pack_forget()
    frames[next].pack()

# Login Function
def login():
    username = username_entry.get()
    password = password_entry.get()
    if username in users and users[username] == password:
        messagebox.showinfo("Login", "Login berhasil!")
        switch_frame("login", "menu")
    else:
        messagebox.showerror("Login", "Username atau password salah!")

# Tambah soal functions
def tambah_soal():
    pertanyaan = pertanyaan_entry.get()
    pilihan_a = pilihan_a_entry.get()
    pilihan_b = pilihan_b_entry.get()
    pilihan_c = pilihan_c_entry.get()
    jawaban = jawaban_entry.get()

    if not all([pertanyaan, pilihan_a, pilihan_b, pilihan_c, jawaban]):
        messagebox.showerror("Error", "Semua kolom harus diisi!")
        return

    soal.append({
        "pertanyaan": pertanyaan,
        "pilihan": [pilihan_a, pilihan_b, pilihan_c],
        "jawaban": jawaban
    })
    messagebox.showinfo("Tambah Soal", "Soal berhasil ditambahkan!")
    reset_form()

# Reset form tambah soal
def reset_form():
    pertanyaan_entry.delete(0, tk.END)
    pilihan_a_entry.delete(0, tk.END)
    pilihan_b_entry.delete(0, tk.END)
    pilihan_c_entry.delete(0, tk.END)
    jawaban_entry.delete(0, tk.END)

# Mulai kuis
def mulai_kuis():
    switch_frame("menu", "kuis")
    tampilkan_soal(0)

# Tampilkan soal secara rekursif
def tampilkan_soal(index):
    global skor
    if index < len(soal):
        pertanyaan_label.config(text=f"Soal {index + 1}: {soal[index]['pertanyaan']}")
        var_pilihan.set(None)
        for i, pilihan in enumerate(soal[index]["pilihan"]):
            radio_buttons[i].config(text=pilihan, value=pilihan)
        lanjut_button.config(command=lambda: cek_jawaban(index))
    else:
        switch_frame("kuis", "skor")
        skor_label.config(text=f"Skor Anda: {skor}/{len(soal)}")
